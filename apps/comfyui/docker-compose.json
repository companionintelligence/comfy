{
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json",
  "schemaVersion": 2,
  "services": [
    {
      "name": "comfyui",
      "image": "runpod/comfyui:latest",
      "isMain": true,
      "internalPort": 8188,
      "environment": [
        {
          "key": "COMFYUI_EXTRA_MODEL_PATHS",
          "value": "${COMFYUI_EXTRA_MODEL_PATHS}"
        },
        {
          "key": "COMFYUI_ENABLE_GPU",
          "value": "false"
        },
        {
          "key": "OLLAMA_MODELS_PATH",
          "value": "${OLLAMA_MODELS_PATH}"
        },
        {
          "key": "CUDA_VISIBLE_DEVICES",
          "value": ""
        },
        {
          "key": "EXTRA_ARGS",
          "value": "--cpu"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/models",
          "containerPath": "/app/models"
        },
        {
          "hostPath": "${APP_DATA_DIR}/output",
          "containerPath": "/app/output"
        },
        {
          "hostPath": "${APP_DATA_DIR}/input",
          "containerPath": "/app/input"
        }
      ],
      "addPorts": [
        {
          "containerPort": 8188,
          "hostPort": "${APP_PORT}"
        }
      ]
    }
  ]
}
